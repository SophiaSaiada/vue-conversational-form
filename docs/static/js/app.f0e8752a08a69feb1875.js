webpackJsonp([1],{NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),n=s("fZjL"),r=s.n(n),i=s("bm7V"),o=s.n(i),l={name:"ConversationalForm",data:function(){return{step:0,q:"",screenplay:Array,values:Array,patterns:Array,finished:!1,scrollBackward:!1,scrollForward:!1,scrollInterval:null}},mounted:function(){this.init()},computed:{currentStepType:function(){return(this.screenplay[this.step]||{type:"text"}).type}},methods:{init:function(){var t=this;this.screenplay=this.$slots.default.filter(function(t){return"fieldset"===t.tag}).map(function(e){var s=e.children.filter(function(t){return["input","select","button"].includes(t.tag)});if(0===s.length)return null;var a=(s=s[0]).data.attrs.placeholder||s.data.attrs.name;if(s.data.attrs["data-question"]&&(a=(a=s.data.attrs["data-question"].split("|"))[Math.floor(Math.random()*a.length)]),s.data.attrs.pattern&&(t.patterns[s.data.attrs.name]=new RegExp(s.data.attrs.pattern)),"input"===s.tag&&"radio"===s.data.attrs.type){var n=e.children.filter(function(t){return"input"===t.tag&&"radio"===t.data.attrs.type}).map(function(t){return t.data.attrs?{text:t.data.attrs["data-text"],value:t.data.attrs.value}:{text:"",value:""}}).filter(function(t){return""!==t.value});return{type:"select",name:s.data.attrs.name,options:n,desc:a}}switch(s.tag){case"input":return{type:s.data.attrs.type,name:s.data.attrs.name,invalidMessage:s.data.attrs["data-invalid"]||"Not Valid",desc:a};case"select":return{type:"select",name:s.data.attrs.name,options:s.children.filter(function(t){return t.tag}).filter(function(t){return"option"===t.tag}).map(function(t){var e=(t.children||[{text:""}])[0].text;return t.data?{text:e,value:(t.data.attrs||{value:e}).value}:{text:e,value:e}}).filter(function(t){return""!==t.value}),desc:a};case"button":return{type:"button",name:s.data.attrs.name,successMessage:s.data.attrs["data-success"],options:[{text:(s.children||[{text:"Submit"}])[0].text,value:(s.data||{attrs:{value:"submit"}}).attrs.value,action:s.data.attrs.type},{text:s.data.attrs["data-cancel"]||"Not Valid",value:"no",type:s.data.attrs.type,action:"cancel"}],desc:a}}}).filter(function(t){return t}),this.step=0,this.finished=!1,this.values={}},parse:function(t){var e=this,s=t.desc.replace(/(\{)([a-z]+)(\})/g,function(t,s,a,n){return(e.values[a]||{text:a}).text}).split("|");return 1===s.length?s[0]:s[Math.floor(Math.random()*s.length)]},choose:function(t){var e=this;if(!this.finished&&["select","button"].includes(this.currentStepType)){var s=!0;if("button"===this.currentStepType){if("submit"===t.action){var a=r()(this.values).reduce(function(t,s){return t[s]=e.values[s].value,t},{});this.$emit("submit",a),this.screenplay[this.step].successMessage&&this.screenplay.splice(this.step+1,0,{type:"message",name:this.screenplay[this.step].name,desc:this.screenplay[this.step].successMessage,successMessage:this.screenplay[this.step].successMessage}),this.screenplay[this.step].answer=this.q,this.finished=!0}"reset"===t.action&&(s=!1,this.init()),"cancel"===t.action&&"reset"===t.type&&(this.screenplay[this.step].answer=this.q,this.finished=!0)}s&&(this.screenplay[this.step].answer=t.text,this.values[this.screenplay[this.step].name]=t,this.doStep())}},send:function(){if(!this.finished&&!["select","submit"].includes(this.currentStepType)&&""!==this.q.trim()){if(this.patterns[this.screenplay[this.step].name]instanceof RegExp)if(!this.patterns[this.screenplay[this.step].name].test(this.q))return this.screenplay.splice(this.step+1,0,{type:"message",name:this.screenplay[this.step].name,desc:this.screenplay[this.step].invalidMessage,invalidMessage:this.screenplay[this.step].invalidMessage}),this.screenplay[this.step].answer=this.q,void this.doStep();this.screenplay[this.step].answer=this.q,this.values[this.screenplay[this.step].name]={text:this.q,value:this.q},this.doStep()}},doStep:function(){var t=this;this.scrollToBottom(),this.q="",this.step++,this.scrollBackward=!1,this.scrollForward=!1,["select","button"].includes(this.currentStepType)?this.$nextTick(function(){return setTimeout(function(){t.stopScroll()},600)}):this.$nextTick(function(){return t.$refs.input.focus()})},scrollToBottom:function(){var t=this.$refs["scroll-box"].children;o.a.scrollTo(t[t.length-1],300,{container:this.$refs["scroll-box"],easing:"ease-in",y:!0,x:!1})},doScrollBackward:function(){var t=this,e=this.$refs.options;this.scrollInterval=setInterval(function(){e.scrollLeft-=5,e.scrollLeft||t.stopScroll()},25)},doScrollForward:function(){var t=this,e=this.$refs.options,s=e.scrollWidth-e.clientWidth;this.scrollInterval=setInterval(function(){e.scrollLeft+=5,e.scrollLeft===s&&t.stopScroll()},25)},stopScroll:function(){var t=this.$refs.options,e=t.scrollWidth-t.clientWidth;this.scrollBackward=t.scrollLeft>10,this.scrollForward=t.scrollLeft<e-10,clearInterval(this.scrollInterval)}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"vcf-container"},[s("div",{staticClass:"vcf-messages"},[s("div",{ref:"scroll-box"},[t._l(t.screenplay,function(e,a){return a<=t.step?[s("div",{key:"q"+a,staticClass:"vcf-question"},[s("span",[t._v(t._s(t.parse(e)))])]),t._v(" "),s("div",{key:"a"+a,staticClass:"vcf-answer"},[s("transition",{attrs:{name:"scale"}},[e.answer?s("span",[t._v(t._s(e.answer))]):t._e()])],1)]:t._e()})],2)]),t._v(" "),s("div",{class:{"vcf-input-container":!0,finished:t.finished}},[s("transition",{attrs:{name:"fade"}},["select"===t.currentStepType||"button"==t.currentStepType?s("div",{ref:"options",staticClass:"vcf-options"},t._l(t.screenplay[t.step].options,function(e,a){return s("div",{key:"o"+a,staticClass:"vcf-option",on:{click:function(s){t.choose(e)}}},[t._v("\n            "+t._s(e.text)+"\n          ")])})):t._e()]),t._v(" "),s("transition",{attrs:{name:"fade"}},["select"===t.currentStepType||"button"==t.currentStepType?s("div",{staticClass:"vcf-options-arrows"},[s("div",{staticClass:"backward",class:{visible:t.scrollBackward},on:{mouseenter:t.doScrollBackward,mouseleave:t.stopScroll}}),t._v(" "),s("div",{staticClass:"forward",class:{visible:t.scrollForward},on:{mouseover:t.doScrollForward,mouseleave:t.stopScroll}})]):t._e()]),t._v(" "),"checkbox"===t.currentStepType?s("input",{directives:[{name:"model",rawName:"v-model",value:t.q,expression:"q"}],ref:"input",staticClass:"vcf-input",attrs:{disabled:t.finished,autofocus:"",type:"checkbox"},domProps:{checked:Array.isArray(t.q)?t._i(t.q,null)>-1:t.q},on:{keypress:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.send(e):null},change:function(e){var s=t.q,a=e.target,n=!!a.checked;if(Array.isArray(s)){var r=t._i(s,null);a.checked?r<0&&(t.q=s.concat([null])):r>-1&&(t.q=s.slice(0,r).concat(s.slice(r+1)))}else t.q=n}}}):"radio"===t.currentStepType?s("input",{directives:[{name:"model",rawName:"v-model",value:t.q,expression:"q"}],ref:"input",staticClass:"vcf-input",attrs:{disabled:t.finished,autofocus:"",type:"radio"},domProps:{checked:t._q(t.q,null)},on:{keypress:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.send(e):null},change:function(e){t.q=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.q,expression:"q"}],ref:"input",staticClass:"vcf-input",attrs:{disabled:t.finished,autofocus:"",type:t.currentStepType},domProps:{value:t.q},on:{keypress:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.send(e):null},input:function(e){e.target.composing||(t.q=e.target.value)}}}),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!("select"===t.currentStepType||"button"==t.currentStepType),expression:"!(currentStepType === 'select' || currentStepType == 'button')"}],staticClass:"vcf-send-button",on:{click:t.send}})])],1)])])},staticRenderFns:[]};var u={name:"App",components:{ConversationalForm:s("VU/8")(l,c,!1,function(t){s("h+F4")},"data-v-5c323557",null).exports},methods:{submit:function(t){console.log("Submit:"),console.log(t)}}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("ConversationalForm",{on:{submit:t.submit}},[s("fieldset",[s("label",{attrs:{for:"name"}},[t._v("What's your name?")]),t._v(" "),s("input",{attrs:{required:"","data-question":"Hi there! What's your name? ",type:"text",name:"name",id:"name"}})]),t._v(" "),s("fieldset",[s("label",{attrs:{for:"name"}},[t._v("What's your gender?")]),t._v(" "),s("input",{attrs:{type:"radio","data-question":"What's your gender?",name:"gender",value:"male","data-text":"Male"}}),t._v(" Male"),s("br"),t._v(" "),s("input",{attrs:{type:"radio",name:"gender",value:"female","data-text":"Female"}}),t._v(" Female"),s("br"),t._v(" "),s("input",{attrs:{type:"radio",name:"gender",value:"other","data-text":"Other"}}),t._v(" Other\n    ")]),t._v(" "),s("fieldset",[s("label",{attrs:{for:"occupation"}},[t._v("Occupation")]),t._v(" "),s("select",{attrs:{"data-question":"Great to meet you, {name}! I'm a web form, what do you do?|Awesome, {name}! And what do you do?",name:"occupation",id:"occupation"}},[s("option",{attrs:{value:"developer"}},[t._v("Developer")]),t._v(" "),s("option",{attrs:{value:"designer"}},[t._v("Designer")]),t._v(" "),s("option",{attrs:{value:"curious-mind"}},[t._v("Curious mind")]),t._v(" "),s("option",{attrs:{value:"lost-cause"}},[t._v("Lost cause")])])]),t._v(" "),s("fieldset",[s("label",{attrs:{for:"company"}},[t._v("Company")]),t._v(" "),s("input",{attrs:{"data-question":"{occupation}, nice! Which company are you with?",type:"text",name:"company",id:"company"}})]),t._v(" "),s("fieldset",[s("label",{attrs:{for:"opinion"}},[t._v("Will conversational interfaces be everywhere?")]),t._v(" "),s("select",{attrs:{"data-question":"Do you think conversational forms will replace web forms in the future?",name:"opinion",id:"opinion"}},[s("option"),t._v(" "),s("option",[t._v("Definitely")]),t._v(" "),s("option",[t._v("Maybe")]),t._v(" "),s("option",[t._v("No")])])]),t._v(" "),s("fieldset",[s("label",{attrs:{for:"email"}},[t._v("Email")]),t._v(" "),s("input",{attrs:{pattern:".+\\@.+\\..+","data-invalid":"E-mail not correct","data-question":"Please give me your email.",type:"email",name:"email",id:"your-email"}})]),t._v(" "),s("fieldset",[s("label",{attrs:{for:"thats-all"}},[t._v("Are you ready to submit the form?")]),t._v(" "),s("button",{attrs:{"data-question":"Are you ready to submit the form?","data-success":"Submited! Yay! 😄",name:"submit",type:"submit","data-cancel":"Nope"}},[t._v("Yup")])]),t._v(" "),s("fieldset",[s("label",{attrs:{for:"thats-all"}},[t._v("Want to start over?")]),t._v(" "),s("button",{attrs:{"data-question":"Want to start over?",name:"reset",type:"reset","data-cancel":"No"}},[t._v("Yes, let's go again")])])])],1)},staticRenderFns:[]};var d=s("VU/8")(u,p,!1,function(t){s("uKVz")},null,null).exports;a.a.config.productionTip=!1,new a.a({el:"#app",components:{App:d},template:"<App/>"})},"h+F4":function(t,e){},uKVz:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.f0e8752a08a69feb1875.js.map